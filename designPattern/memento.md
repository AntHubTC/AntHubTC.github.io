# 备忘录模式

​		提供了一种弥补真实世界缺陷的方法，让“后悔药”在程序的世界中真实可行。

## 定义

​		在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存做这个状态。这样以后就可将该对象恢复到原先保存的状态。
​		通俗来说，备忘录模式就是一个对象的备份模式，提供了一种程序数据的备份方法。

![img](img/memento/201907202121287.png)

**1.Oraiginator 发起人角色**

记录当前时刻的内部桩体，负责定义哪些属于备份范围的状态，负责创建和恢复备忘录数据

**2.Memento备忘录角色**

负责存储Originator发起人对象的内部状态，在需要时提供发起人需要的内部状态

**3.Caretaker 备忘录管理员角色**

对备忘录角色进行管理，保存和提供备忘录

## 使用场景

1.需要保存和恢复数据的场景
2.提供可回滚的操作
3.数据库的事务管理就是用的备忘录模式

## 注意事项

备忘录的生命周期，建立起来就要使用，不使用了就要立刻删除其引用，主动管理它的生命周期 

## 备忘录的性能

不要在需要频繁备份的地方使用备忘录模式
原因有两个：
1.是无法控制备忘录的生成对象数量
2.是大对象的建立是需要消耗资源的