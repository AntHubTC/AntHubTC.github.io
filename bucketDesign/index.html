<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¿æ —åœ†æŸ±å®¹å™¨è®¡ç®—å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 1rem;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .function-section {
            margin-bottom: 40px;
            padding: 30px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            background: #fafafa;
        }

        .function-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ff6b6b;
            display: inline-block;
        }

        .input-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .input-group label {
            min-width: 80px;
            font-weight: bold;
            color: #555;
        }

        .input-group input {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            width: 150px;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #ff6b6b;
        }

        .btn {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .result {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-size: 1.1em;
            color: #2e7d32;
            display: none;
        }

        .formula-info {
            background: #f0f8ff;
            border: 2px solid #2196f3;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-size: 0.9em;
            color: #1976d2;
        }

        .formula-info h4 {
            margin-bottom: 10px;
            color: #1565c0;
        }

        .formula-info ul {
            margin-left: 20px;
        }

        .formula-info li {
            margin-bottom: 5px;
        }

        @media (max-width: 600px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .content {
                padding: 20px;
            }
            
            .input-group {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .input-group input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŒ° æ¿æ —åœ†æŸ±å®¹å™¨è®¡ç®—å·¥å…·</h1>
            <p>ç²¾ç¡®è®¡ç®—æ¿æ —å®¹å™¨çš„å°ºå¯¸ä¸å®¹é‡</p>
        </div>
        
        <div class="content">
            <!-- åŠŸèƒ½ä¸€ï¼šæ ¹æ®é‡é‡è®¡ç®—å°ºå¯¸ -->
            <div class="function-section">
                <h2 class="function-title">åŠŸèƒ½ä¸€ï¼šæ ¹æ®ç›®æ ‡é‡é‡è®¡ç®—å®¹å™¨å°ºå¯¸</h2>
                <p style="margin-bottom: 20px; color: #666;">è¾“å…¥ç›®æ ‡é‡é‡ï¼Œç„¶åè¾“å…¥å†…å¾„æˆ–å†…æ·±ï¼Œç³»ç»Ÿå°†è®¡ç®—å‡ºå¦ä¸€ä¸ªå°ºå¯¸</p>
                
                <div class="input-group">
                    <label>ç›®æ ‡é‡é‡ï¼š</label>
                    <input type="number" id="targetWeight" placeholder="è¾“å…¥é‡é‡(æ–¤)" step="0.1">
                </div>
                
                <div class="input-group">
                    <label>å†…å¾„(cm)ï¼š</label>
                    <input type="number" id="diameter1" placeholder="è¾“å…¥å†…å¾„" step="0.1">
                    <button class="btn" onclick="calculateHeight()">è®¡ç®—å†…æ·±</button>
                </div>
                
                <div class="input-group">
                    <label>å†…æ·±(cm)ï¼š</label>
                    <input type="number" id="height1" placeholder="è¾“å…¥å†…æ·±" step="0.1">
                    <button class="btn" onclick="calculateDiameter()">è®¡ç®—å†…å¾„</button>
                </div>
                
                <div id="result1" class="result"></div>
            </div>

            <!-- åŠŸèƒ½äºŒï¼šæ ¹æ®å°ºå¯¸è®¡ç®—å®¹é‡ -->
            <div class="function-section">
                <h2 class="function-title">åŠŸèƒ½äºŒï¼šæ ¹æ®å®¹å™¨å°ºå¯¸è®¡ç®—å®¹é‡</h2>
                <p style="margin-bottom: 20px; color: #666;">è¾“å…¥å®¹å™¨çš„å†…å¾„å’Œå†…æ·±ï¼Œç³»ç»Ÿå°†è®¡ç®—å‡ºèƒ½è£…å¤šå°‘æ–¤æ¿æ —</p>
                
                <div class="input-group">
                    <label>å†…å¾„(cm)ï¼š</label>
                    <input type="number" id="diameter2" placeholder="è¾“å…¥å†…å¾„" step="0.1">
                </div>
                
                <div class="input-group">
                    <label>å†…æ·±(cm)ï¼š</label>
                    <input type="number" id="height2" placeholder="è¾“å…¥å†…æ·±" step="0.1">
                </div>
                
                <button class="btn" onclick="calculateCapacity()">è®¡ç®—å®¹é‡</button>
                
                <div id="result2" class="result"></div>
            </div>

            <!-- è®¡ç®—å…¬å¼è¯´æ˜ -->
            <div class="formula-info">
                <h4>ğŸ“ è®¡ç®—å…¬å¼è¯´æ˜</h4>
                <ul>
                    <li><strong>åœ†æŸ±ä½“ç§¯å…¬å¼ï¼š</strong> V = Ï€ Ã— (d/2)Â² Ã— h (dä¸ºå†…å¾„ï¼Œd/2ä¸ºåŠå¾„)</li>
                    <li><strong>æ¿æ —å¯†åº¦ï¼š</strong> 0.01058 ä¸¤/ç«‹æ–¹å˜ç±³ (åŸºäºå®æµ‹æ•°æ®)</li>
                    <li><strong>é‡é‡è½¬æ¢ï¼š</strong> 1æ–¤ = 10ä¸¤</li>
                    <li><strong>ç”Ÿç†Ÿæ¯”ä¾‹ï¼š</strong> ç”Ÿæ¿æ —:ç†Ÿæ¿æ — = 1:1.33</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // æ¿æ —å¯†åº¦ (ä¸¤/ç«‹æ–¹å˜ç±³) - åŸºäºæ‚¨æä¾›çš„å®æµ‹æ•°æ®
        // const CHESTNUT_DENSITY = 0.0105809531087428; // ä¸¤/ç«‹æ–¹å˜ç±³
        const CHESTNUT_DENSITY = 0.0117892552449471; // ä¸¤/ç«‹æ–¹å˜ç±³
	// const CHESTNUT_DENSITY = 0.0125141363813501; // ä¸¤/ç«‹æ–¹å˜ç±³ ï¼ˆç°åœºå®æµ‹æ•°æ®ï¼Œæœ‰å¯èƒ½æœ‰è¯¯ï¼‰
        const JIN_TO_LIANG = 10; // 1æ–¤ = 10ä¸¤

        // åŠŸèƒ½ä¸€ï¼šæ ¹æ®ç›®æ ‡é‡é‡å’Œå†…å¾„è®¡ç®—å†…æ·±
        function calculateHeight() {
            const targetWeight = parseFloat(document.getElementById('targetWeight').value);
            const diameter = parseFloat(document.getElementById('diameter1').value);
            
            if (!targetWeight || !diameter) {
                alert('è¯·è¾“å…¥ç›®æ ‡é‡é‡å’Œå†…å¾„');
                return;
            }
            
            if (targetWeight <= 0 || diameter <= 0) {
                alert('è¯·è¾“å…¥æ­£æ•°');
                return;
            }
            
            // å°†å†…å¾„è½¬æ¢ä¸ºåŠå¾„
            const radius = diameter / 2;
            
            // è®¡ç®—éœ€è¦çš„ä½“ç§¯
            const targetVolume = targetWeight * JIN_TO_LIANG / CHESTNUT_DENSITY;
            
            // è®¡ç®—å†…æ·±ï¼šh = V / (Ï€ Ã— rÂ²)
            const height = targetVolume / (Math.PI * radius * radius);
            
            const result = document.getElementById('result1');
            result.innerHTML = `
                <strong>è®¡ç®—ç»“æœï¼š</strong><br>
                ç›®æ ‡é‡é‡ï¼š${targetWeight} æ–¤<br>
                å†…å¾„ï¼š${diameter} cm<br>
                åŠå¾„ï¼š${radius.toFixed(2)} cm<br>
                è®¡ç®—å¾—å‡ºå†…æ·±ï¼š<strong style="color: #d32f2f; font-size: 1.2em;">${height.toFixed(2)} cm</strong><br>
                å®¹å™¨ä½“ç§¯ï¼š${(Math.PI * radius * radius * height).toFixed(2)} ç«‹æ–¹å˜ç±³
            `;
            result.style.display = 'block';
        }

        // åŠŸèƒ½ä¸€ï¼šæ ¹æ®ç›®æ ‡é‡é‡å’Œå†…æ·±è®¡ç®—å†…å¾„
        function calculateDiameter() {
            const targetWeight = parseFloat(document.getElementById('targetWeight').value);
            const height = parseFloat(document.getElementById('height1').value);
            
            if (!targetWeight || !height) {
                alert('è¯·è¾“å…¥ç›®æ ‡é‡é‡å’Œå†…æ·±');
                return;
            }
            
            if (targetWeight <= 0 || height <= 0) {
                alert('è¯·è¾“å…¥æ­£æ•°');
                return;
            }
            
            // è®¡ç®—éœ€è¦çš„ä½“ç§¯
            const targetVolume = targetWeight * JIN_TO_LIANG / CHESTNUT_DENSITY;
            
            // è®¡ç®—åŠå¾„ï¼šr = âˆš(V / (Ï€ Ã— h))
            const radius = Math.sqrt(targetVolume / (Math.PI * height));
            
            // è®¡ç®—å†…å¾„
            const diameter = radius * 2;
            
            const result = document.getElementById('result1');
            result.innerHTML = `
                <strong>è®¡ç®—ç»“æœï¼š</strong><br>
                ç›®æ ‡é‡é‡ï¼š${targetWeight} æ–¤<br>
                å†…æ·±ï¼š${height} cm<br>
                è®¡ç®—å¾—å‡ºå†…å¾„ï¼š<strong style="color: #d32f2f; font-size: 1.2em;">${diameter.toFixed(2)} cm</strong><br>
                åŠå¾„ï¼š${radius.toFixed(2)} cm<br>
                å®¹å™¨ä½“ç§¯ï¼š${(Math.PI * radius * radius * height).toFixed(2)} ç«‹æ–¹å˜ç±³
            `;
            result.style.display = 'block';
        }

        // åŠŸèƒ½äºŒï¼šæ ¹æ®å†…å¾„å’Œå†…æ·±è®¡ç®—å®¹é‡
        function calculateCapacity() {
            const diameter = parseFloat(document.getElementById('diameter2').value);
            const height = parseFloat(document.getElementById('height2').value);
            
            if (!diameter || !height) {
                alert('è¯·è¾“å…¥å†…å¾„å’Œå†…æ·±');
                return;
            }
            
            if (diameter <= 0 || height <= 0) {
                alert('è¯·è¾“å…¥æ­£æ•°');
                return;
            }
            
            // å°†å†…å¾„è½¬æ¢ä¸ºåŠå¾„
            const radius = diameter / 2;
            
            // è®¡ç®—ä½“ç§¯
            const volume = Math.PI * radius * radius * height;
            
            // è®¡ç®—é‡é‡
            const weightInLiang = volume * CHESTNUT_DENSITY;
            const weightInJin = weightInLiang / JIN_TO_LIANG;
            
            // è®¡ç®—ç”Ÿæ¿æ —é‡é‡
            const rawWeight = weightInJin * 1.33;
            
            const result = document.getElementById('result2');
            result.innerHTML = `
                <strong>è®¡ç®—ç»“æœï¼š</strong><br>
                å®¹å™¨å†…å¾„ï¼š${diameter} cm<br>
                å®¹å™¨å†…åŠå¾„ï¼š${radius.toFixed(2)} cm<br>
                å®¹å™¨å†…æ·±ï¼š${height} cm<br>
                å®¹å™¨ä½“ç§¯ï¼š${volume.toFixed(2)} ç«‹æ–¹å˜ç±³<br>
                <hr style="margin: 10px 0;">
                <strong style="color: #d32f2f; font-size: 1.3em;">èƒ½è£…ç†Ÿæ¿æ —ï¼š${weightInJin.toFixed(2)} æ–¤</strong><br>
                <strong style="color: #1976d2; font-size: 1.2em;">éœ€ç‚’ç”Ÿæ¿æ —ï¼š${rawWeight.toFixed(2)} æ–¤</strong><br>
                <small style="color: #666;">(æŒ‰ç”Ÿç†Ÿæ¯”ä¾‹ 1:1.33 è®¡ç®—)</small>
            `;
            result.style.display = 'block';
        }

        // æ·»åŠ å›è½¦é”®æ”¯æŒ
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        // æ ¹æ®è¾“å…¥æ¡†ä½ç½®å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°
                        if (this.id === 'diameter1') {
                            calculateHeight();
                        } else if (this.id === 'height1') {
                            calculateDiameter();
                        } else if (this.id === 'diameter2' || this.id === 'height2') {
                            calculateCapacity();
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>