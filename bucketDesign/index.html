<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>板栗圆柱容器计算工具</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 1rem;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .function-section {
            margin-bottom: 40px;
            padding: 30px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            background: #fafafa;
        }

        .function-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ff6b6b;
            display: inline-block;
        }

        .input-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .input-group label {
            min-width: 80px;
            font-weight: bold;
            color: #555;
        }

        .input-group input {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            width: 150px;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #ff6b6b;
        }

        .btn {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .result {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-size: 1.1em;
            color: #2e7d32;
            display: none;
        }

        .formula-info {
            background: #f0f8ff;
            border: 2px solid #2196f3;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-size: 0.9em;
            color: #1976d2;
        }

        .formula-info h4 {
            margin-bottom: 10px;
            color: #1565c0;
        }

        .formula-info ul {
            margin-left: 20px;
        }

        .formula-info li {
            margin-bottom: 5px;
        }

        @media (max-width: 600px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .content {
                padding: 20px;
            }
            
            .input-group {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .input-group input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🌰 板栗圆柱容器计算工具</h1>
            <p>精确计算板栗容器的尺寸与容量</p>
        </div>
        
        <div class="content">
            <!-- 功能一：根据重量计算尺寸 -->
            <div class="function-section">
                <h2 class="function-title">功能一：根据目标重量计算容器尺寸</h2>
                <p style="margin-bottom: 20px; color: #666;">输入目标重量，然后输入内径或内深，系统将计算出另一个尺寸</p>
                
                <div class="input-group">
                    <label>目标重量：</label>
                    <input type="number" id="targetWeight" placeholder="输入重量(斤)" step="0.1">
                </div>
                
                <div class="input-group">
                    <label>内径(cm)：</label>
                    <input type="number" id="diameter1" placeholder="输入内径" step="0.1">
                    <button class="btn" onclick="calculateHeight()">计算内深</button>
                </div>
                
                <div class="input-group">
                    <label>内深(cm)：</label>
                    <input type="number" id="height1" placeholder="输入内深" step="0.1">
                    <button class="btn" onclick="calculateDiameter()">计算内径</button>
                </div>
                
                <div id="result1" class="result"></div>
            </div>

            <!-- 功能二：根据尺寸计算容量 -->
            <div class="function-section">
                <h2 class="function-title">功能二：根据容器尺寸计算容量</h2>
                <p style="margin-bottom: 20px; color: #666;">输入容器的内径和内深，系统将计算出能装多少斤板栗</p>
                
                <div class="input-group">
                    <label>内径(cm)：</label>
                    <input type="number" id="diameter2" placeholder="输入内径" step="0.1">
                </div>
                
                <div class="input-group">
                    <label>内深(cm)：</label>
                    <input type="number" id="height2" placeholder="输入内深" step="0.1">
                </div>
                
                <button class="btn" onclick="calculateCapacity()">计算容量</button>
                
                <div id="result2" class="result"></div>
            </div>

            <!-- 计算公式说明 -->
            <div class="formula-info">
                <h4>📐 计算公式说明</h4>
                <ul>
                    <li><strong>圆柱体积公式：</strong> V = π × (d/2)² × h (d为内径，d/2为半径)</li>
                    <li><strong>板栗密度：</strong> 0.01058 两/立方厘米 (基于实测数据)</li>
                    <li><strong>重量转换：</strong> 1斤 = 10两</li>
                    <li><strong>生熟比例：</strong> 生板栗:熟板栗 = 1:1.33</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // 板栗密度 (两/立方厘米) - 基于您提供的实测数据
        // const CHESTNUT_DENSITY = 0.0105809531087428; // 两/立方厘米
        const CHESTNUT_DENSITY = 0.0117892552449471; // 两/立方厘米
	// const CHESTNUT_DENSITY = 0.0125141363813501; // 两/立方厘米 （现场实测数据，有可能有误）
        const JIN_TO_LIANG = 10; // 1斤 = 10两

        // 功能一：根据目标重量和内径计算内深
        function calculateHeight() {
            const targetWeight = parseFloat(document.getElementById('targetWeight').value);
            const diameter = parseFloat(document.getElementById('diameter1').value);
            
            if (!targetWeight || !diameter) {
                alert('请输入目标重量和内径');
                return;
            }
            
            if (targetWeight <= 0 || diameter <= 0) {
                alert('请输入正数');
                return;
            }
            
            // 将内径转换为半径
            const radius = diameter / 2;
            
            // 计算需要的体积
            const targetVolume = targetWeight * JIN_TO_LIANG / CHESTNUT_DENSITY;
            
            // 计算内深：h = V / (π × r²)
            const height = targetVolume / (Math.PI * radius * radius);
            
            const result = document.getElementById('result1');
            result.innerHTML = `
                <strong>计算结果：</strong><br>
                目标重量：${targetWeight} 斤<br>
                内径：${diameter} cm<br>
                半径：${radius.toFixed(2)} cm<br>
                计算得出内深：<strong style="color: #d32f2f; font-size: 1.2em;">${height.toFixed(2)} cm</strong><br>
                容器体积：${(Math.PI * radius * radius * height).toFixed(2)} 立方厘米
            `;
            result.style.display = 'block';
        }

        // 功能一：根据目标重量和内深计算内径
        function calculateDiameter() {
            const targetWeight = parseFloat(document.getElementById('targetWeight').value);
            const height = parseFloat(document.getElementById('height1').value);
            
            if (!targetWeight || !height) {
                alert('请输入目标重量和内深');
                return;
            }
            
            if (targetWeight <= 0 || height <= 0) {
                alert('请输入正数');
                return;
            }
            
            // 计算需要的体积
            const targetVolume = targetWeight * JIN_TO_LIANG / CHESTNUT_DENSITY;
            
            // 计算半径：r = √(V / (π × h))
            const radius = Math.sqrt(targetVolume / (Math.PI * height));
            
            // 计算内径
            const diameter = radius * 2;
            
            const result = document.getElementById('result1');
            result.innerHTML = `
                <strong>计算结果：</strong><br>
                目标重量：${targetWeight} 斤<br>
                内深：${height} cm<br>
                计算得出内径：<strong style="color: #d32f2f; font-size: 1.2em;">${diameter.toFixed(2)} cm</strong><br>
                半径：${radius.toFixed(2)} cm<br>
                容器体积：${(Math.PI * radius * radius * height).toFixed(2)} 立方厘米
            `;
            result.style.display = 'block';
        }

        // 功能二：根据内径和内深计算容量
        function calculateCapacity() {
            const diameter = parseFloat(document.getElementById('diameter2').value);
            const height = parseFloat(document.getElementById('height2').value);
            
            if (!diameter || !height) {
                alert('请输入内径和内深');
                return;
            }
            
            if (diameter <= 0 || height <= 0) {
                alert('请输入正数');
                return;
            }
            
            // 将内径转换为半径
            const radius = diameter / 2;
            
            // 计算体积
            const volume = Math.PI * radius * radius * height;
            
            // 计算重量
            const weightInLiang = volume * CHESTNUT_DENSITY;
            const weightInJin = weightInLiang / JIN_TO_LIANG;
            
            // 计算生板栗重量
            const rawWeight = weightInJin * 1.33;
            
            const result = document.getElementById('result2');
            result.innerHTML = `
                <strong>计算结果：</strong><br>
                容器内径：${diameter} cm<br>
                容器内半径：${radius.toFixed(2)} cm<br>
                容器内深：${height} cm<br>
                容器体积：${volume.toFixed(2)} 立方厘米<br>
                <hr style="margin: 10px 0;">
                <strong style="color: #d32f2f; font-size: 1.3em;">能装熟板栗：${weightInJin.toFixed(2)} 斤</strong><br>
                <strong style="color: #1976d2; font-size: 1.2em;">需炒生板栗：${rawWeight.toFixed(2)} 斤</strong><br>
                <small style="color: #666;">(按生熟比例 1:1.33 计算)</small>
            `;
            result.style.display = 'block';
        }

        // 添加回车键支持
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        // 根据输入框位置决定调用哪个函数
                        if (this.id === 'diameter1') {
                            calculateHeight();
                        } else if (this.id === 'height1') {
                            calculateDiameter();
                        } else if (this.id === 'diameter2' || this.id === 'height2') {
                            calculateCapacity();
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>