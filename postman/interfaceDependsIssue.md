# 接口依赖问题

​	当我们使用一个接口需要要另一个接口返回附带的一些数据，否则接口会报错的一些问题。

## 情况：依赖cookie问题

​		有些登录服务，在登录后会在Cookie中存放一个JSESSIONID来进行维持会话，下次接口访问服务端的时候要将cookie传回服务端验证会话，如果验证不成功就没有办法正常访问服务。

​		对于这个问题相对来说在postman中很容易解决，因为postman提供了一个cookie的功能，该功能会为该服务端地址下维护一个最新的cookie。所以在测试一个接口的时候，首先要确保已经登录(请求登录接口)，并且cookie中有没有会话超时的JSESSIONID。

​		如下图中，发送“登录”接口后，cookies中会多一个JSESSIONID，这时候发送“获取用户菜单”接口postman就会将cookies中的信息附带到这个请求中，然后就能得到一个正确的响应。

![1570781913510](.\img\1570781913510.png)



## 情况：依赖另一个接口的响应数据

​		下面示例也是通过登录相关演示，其它接口依赖登录接口返回的token令牌访问服务。

登录接口：

![](.\img\20190809143011500.png)

在“用户登录”请求棉种中的“Tests”中写入请求响应后要执行的脚本(将token设置到环境变量) :

![](.\img\20190809143212262.png)

然后其它接口就可以直接使用这个保存了令牌的环境变量了：

![1570782517739](.\img\1570782517739.png)